# React Flow Technical Rules (Family Tree Project)
1. 結構化管理：處理夫妻/伴侶關係時，必須使用 FamilyGroup (Parent Node) 結構，確保座標連動。
2. Handle 鎖定與座標：
   - 伴侶連線：鎖定在節點左右兩側 Y=50% 中心位置，嚴禁連到頂部或底部。
   - 動態置中：群組內成員拖動時，愛心或其他關聯錨點必須即時置中。
3. 單親與連線邏輯：
   - 自動適配：若成員無配偶，自動切換為「單親模式」，隱藏愛心裝飾。
   - 子女連線：單親狀態下，子女線起點直接從成員節點 Bottom Handle 垂直拉出。
4. 狀態表現規範：
   - 亡逝狀態 (status: deceased)：節點需套用灰階、低透明度、細虛線外框。
   - 亡逝關係線：只要關係鏈涉及亡者，Edge 必須統一渲染為「細虛線」。

# Development Commands
- 每次修改代碼前，請先確認連線 Handle 位置是否符合上述規則。
- 確保所有座標計算皆為「相對座標」，以利群組化移動。